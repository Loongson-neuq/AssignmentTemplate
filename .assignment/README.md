本文件夹用于储存标识作业元信息的文件及作业提交器。

**对于作业的说明以及其他附加信息请放在仓库根目录的 `README.md` 中而不是本文件中。**

## 文件结构
```
- config.json - 作业配置文件
- Submitter/ - 作业提交器代码
```

## config.json

作业配置文件，用于标识作业的元信息。**每次布置新作业时需要更新该文件。**
请注意格式的正确性，因此请仔细阅读以下说明。
可以使用 `check_config.py` 脚本进行格式检查。

该文件包含以下键：

### `name`
- 取值范围：`字符串`

作业名称，标识作业的名字，仅用于本地

### `description`
- 取值范围：`字符串`

作业描述，应该没什么用，仅用于本地

### `type`
- 取值范围：`字符串`

作业类型，标识该作业属于哪个方向。可选值: "OS", "CPU"

学生只需要选择对应的方向提交作业即可。

用于服务器端的作业分类。

### `status`
- 取值范围：`字符串`

标识作业状态，可选值: "open", "closed"

### `id`
- 取值范围：`字符串`

标识作业的唯一ID，与`type`字段一同用于用于服务器端的作业分类。

**请不要包含空格或非ASCII字符**

### `version`
- 取值范围：`整形数字`

作业版本，用于标识作业的版本号。通常为 1 即可。用于服务端和本地的作业版本控制。有版本更新时可以递增。提交时如果本地版本低于服务器版本会提示更新。同时作业会被远程拒绝。

### 自动评分

自动评分的配置，用于标识作业是否需要自动评分，以及评分的方式。由`auto_grade`字段标识。

在 Github Actions 中，Submitter 会根据该字段的配置自动评分。

当评分超时等意外情况发生时，Submitter 会自动终止评分，并标记为评分失败。测试结果会以log的形式输出到Github Actions中。但成绩**不会**被提交。

#### `enable`
- 取值范围：`bool`

标识是否启用自动评分。如果为 `true`，则启用自动评分。启用自动评分后，Submitter 会根据`command`字段执行相应的命令。

#### `timeout`
- 取值范围：`整形数字`

自动评分的超时时间，单位为秒。如果评分超时，Submitter 会自动终止评分，并标记为评分失败。

#### `command`
- 取值范围：`字符串`

自动评分的命令。Submitter 会根据该字段执行相应的命令。命令的输出会被提交到 Github Actions 中。

由于一行命令通常不够用，建议将脚本写在文件中，然后在该字段中执行脚本。

例如，在 `.assignment/grade.sh` 中写入评分脚本，然后在 `command` 字段中写入 `bash .assignment/grade.sh`。

#### `max_score`
- 取值范围：`整形数字`

作业的最高分数。Submitter 会根据评分结果计算出的分数与该字段进行比较，如果超过该字段，则会将分数截断为该字段的值。

同时，如果评分失败，Submitter 会将分数置为 0，不过反正不会提交，所以也没什么用。

使用自动评分时，该字段是必须的。

在评测脚本中，将该结果得分写入环境变量 `ASSIGNMENT_SCORE`，Submitter 会在结束后自动读取该环境变量。建议无论如何也要在进程结束后再写入该环境变量，否则可能能够作弊修改分数。

#### `upload_output`
- 取值范围：`bool`

标识是否上传评分结果。如果为 `true`，则会将评分结果上传到 Github Actions 的 Artifact 中。

## Submitter

用 C# 编写的作业提交器，用于提交作业。学生无需手动运行，在 commit 到 GitHub 时会在 GitHub Actions 中自动运行。请注意查看 GitHub Actions 的输出，以确认提交是否成功。通常如果没有报错，提交就是成功的。
